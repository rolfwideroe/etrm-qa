<?xml version="1.0" encoding="UTF-8"?>
<DealInsertUpdateTestCase>
<InsertXml>
<![CDATA[ 
<DealInsert xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="DealInsert.xsd">
	<MetaData>
		<Timezone>CET 06-06</Timezone>
	</MetaData>
	<Transaction>
		<TransactionType>Automatic</TransactionType>
		<DealType>Gas-StructuredDeal</DealType>
		<Portfolios>
			<Portfolio>API Test Customer</Portfolio>
			<CounterpartyPortfolio>API Test Counterparty</CounterpartyPortfolio>
			<BuySell>Buy</BuySell>
		</Portfolios>
		<GasStructuredDeal>
			<InstrumentData>
				<ExecutionVenue>None</ExecutionVenue>
				<PriceBasis>Endex TTF</PriceBasis>
				<PriceType>Cap/Floor</PriceType>
				<CapFloorPricingResolution>Hourly</CapFloorPricingResolution>
				<FromDate>2015-01-01</FromDate>
				<ToDate>2017-12-31</ToDate>
				<Physical>
					<DeliveryArea AreaName="TTF"/>
				</Physical>
				<TransactionName>GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY</TransactionName>
			</InstrumentData>
			<SettlementData>
				<FlexibleStructuredDealInformation>
					<TimeSeries>
						<TimeSeriesType>ForecastedVolume</TimeSeriesType>						
						<Resolution>Yearly</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2016-01-01T06:00:00" Value="1.2"/>
						<TimeSeriesDetail FromDateTime="2016-01-01T06:00:00" ToDateTime="2017-01-01T06:00:00" Value="1.3"/>
						<TimeSeriesDetail FromDateTime="2017-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="1.5"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>RealizedVolume</TimeSeriesType>	
						<Resolution>Yearly</Resolution>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>CapPrice</TimeSeriesType>
						<Resolution>EntireContractPeriod</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="2.1"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>FloorPrice</TimeSeriesType>
						<Resolution>EntireContractPeriod</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="1.1"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>MultiplierBeforeCapFloorPrice</TimeSeriesType>
						<Resolution>EntireContractPeriod</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="3.1"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>MultiplierAfterCapFloorPrice</TimeSeriesType>
						<Resolution>EntireContractPeriod</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="4.1"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>MarginBeforeCapFloorPrice</TimeSeriesType>
						<Resolution>EntireContractPeriod</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="5.1"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>MarginAfterCapFloorPrice</TimeSeriesType>
						<Resolution>EntireContractPeriod</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="6.1"/>
					</TimeSeries>
				</FlexibleStructuredDealInformation>
				<QuantityUnit>MWh/d</QuantityUnit>
				<Currency>EUR</Currency>
				<PriceVolumeUnit>PerMWh</PriceVolumeUnit>
				<CurrencySource>Viz</CurrencySource>
				<Clearing>Electronic</Clearing>
				<ClearingCurrency>EUR</ClearingCurrency>
				<ClearingFee>0</ClearingFee>
				<BrokerTradingFee>0</BrokerTradingFee>
				<BrokerCurrency>EUR</BrokerCurrency>
			</SettlementData>
		</GasStructuredDeal>
		<DealDetails>
			<Status>Active</Status>
			<Trader>DealImport</Trader>
			<TradeDate>2013-06-01T21:22:23</TradeDate>
		</DealDetails>
		<ReferenceData>
			<Comment>GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY; should pass</Comment>
			<DealGroup>API Test</DealGroup>
			<ExternalId>GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY</ExternalId>
			<ExternalSource>XMLFileImport</ExternalSource>
			<TicketNumber>TicketNumber</TicketNumber>
		</ReferenceData>
	</Transaction>
</DealInsert>
]]>
</InsertXml>
<UpdateXml>
<![CDATA[ 
<DealInsert xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="DealInsert.xsd">
	<MetaData>
		<Timezone>CET 06-06</Timezone>
	</MetaData>
	<Transaction>
		<TransactionType>Automatic</TransactionType>
		<DealType>Gas-StructuredDeal</DealType>
		<Portfolios>
			<Portfolio>API Test Customer</Portfolio>
			<CounterpartyPortfolio>API Test Counterparty</CounterpartyPortfolio>
			<BuySell>Buy</BuySell>
		</Portfolios>
		<GasStructuredDeal>
			<InstrumentData>
				<ExecutionVenue>None</ExecutionVenue>
				<PriceBasis>Endex TTF</PriceBasis>
				<PriceType>Cap/Floor</PriceType>
				<CapFloorPricingResolution>Hourly</CapFloorPricingResolution>
				<FromDate>2014-01-01</FromDate>
				<ToDate>2018-12-31</ToDate>
				<Physical>
					<DeliveryArea AreaName="TTF"/>
				</Physical>
				<TransactionName>GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY</TransactionName>
			</InstrumentData>
			<SettlementData>
				<FlexibleStructuredDealInformation>
					<TimeSeries>
						<TimeSeriesType>ForecastedVolume</TimeSeriesType>						
						<Resolution>Yearly</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2015-01-01T06:00:00" ToDateTime="2016-01-01T06:00:00" Value="1.2"/>
						<TimeSeriesDetail FromDateTime="2017-01-01T06:00:00" ToDateTime="2018-01-01T06:00:00" Value="1.5"/>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>RealizedVolume</TimeSeriesType>	
						<Resolution>Yearly</Resolution>
					</TimeSeries>
					<TimeSeries>
						<TimeSeriesType>CapPrice</TimeSeriesType>
						<Resolution>Yearly</Resolution>
						<TimeZone>CET</TimeZone>
						<TimeSeriesDetail FromDateTime="2018-01-01T06:00:00" ToDateTime="2019-01-01T06:00:00" Value="4.1"/>
					</TimeSeries>
				</FlexibleStructuredDealInformation>
				<QuantityUnit>MWh/d</QuantityUnit>
				<Currency>EUR</Currency>
				<PriceVolumeUnit>PerMWh</PriceVolumeUnit>
				<CurrencySource>Viz</CurrencySource>
				<Clearing>Electronic</Clearing>
				<ClearingCurrency>EUR</ClearingCurrency>
				<ClearingFee>0</ClearingFee>
				<BrokerTradingFee>0</BrokerTradingFee>
				<BrokerCurrency>EUR</BrokerCurrency>
			</SettlementData>
		</GasStructuredDeal>
		<DealDetails>
			<Status>Active</Status>
			<Trader>DealImport</Trader>
			<TradeDate>2013-06-01T21:22:23</TradeDate>
		</DealDetails>
		<ReferenceData>
			<Comment>GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY; should pass</Comment>
			<DealGroup>API Test</DealGroup>
			<ExternalId>GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY</ExternalId>
			<ExternalSource>XMLFileImport</ExternalSource>
			<TicketNumber>TicketNumber</TicketNumber>
		</ReferenceData>
	</Transaction>
</DealInsert>
	]]>
	</UpdateXml>
	<ExpectedResult ExpectedType="TimeSeries">
    <ExpectedTimeSeriesSets>
	<ExpectedTimeSeriesSet ExternalId="GasFlexibleStructuredDealCapFloorSingleChangeDateRangeAndResolutionStoY">
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Cap Price</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z" Value="4.1" />
			</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Floor Price</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z" Value="1.1" />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z" Value="1.1" />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z" Value="1.1" />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z" Value="1.1" />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z" Value="1.1" />
			</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>	
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Forecasted Volume</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z" Value="1.2" />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z" Value="1.5" />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z"  />
		</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Margin After Cap/Floor Price</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z" Value="6.1" />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z" Value="6.1" />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z" Value="6.1" />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z" Value="6.1" />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z" Value="6.1" />
		</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>	
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Margin Before Cap/Floor Price</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z" Value="5.1" />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z" Value="5.1" />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z" Value="5.1" />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z" Value="5.1" />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z" Value="5.1" />
		</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>	
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Multiplier After Cap/Floor Price</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z" Value="4.1" />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z" Value="4.1" />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z" Value="4.1" />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z" Value="4.1" />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z" Value="4.1" />
		</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>	
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Multiplier Before Cap/Floor Price</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z" Value="3.1" />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z" Value="3.1" />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z" Value="3.1" />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z" Value="3.1" />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z" Value="3.1" />
		</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>	
	<ExpectedTimeSeries>
		<Resolution>Year</Resolution>
		<TimeSeriesTypeName>Realized Volume</TimeSeriesTypeName>
		<TimezoneName>CET 06-06</TimezoneName>
		<ExpectedTimeSeriesValues>
			<ExpectedTimeSeriesValue FromDateTime="2014-01-01T00:00:00" UntilDateTime="2015-01-01T00:00:00" UtcFromDateTime="2014-01-01T05:00:00Z" UtcUntilDateTime="2015-01-01T05:00:00Z" />
			<ExpectedTimeSeriesValue FromDateTime="2015-01-01T00:00:00" UntilDateTime="2016-01-01T00:00:00" UtcFromDateTime="2015-01-01T05:00:00Z" UtcUntilDateTime="2016-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2016-01-01T00:00:00" UntilDateTime="2017-01-01T00:00:00" UtcFromDateTime="2016-01-01T05:00:00Z" UtcUntilDateTime="2017-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2017-01-01T00:00:00" UntilDateTime="2018-01-01T00:00:00" UtcFromDateTime="2017-01-01T05:00:00Z" UtcUntilDateTime="2018-01-01T05:00:00Z"  />
			<ExpectedTimeSeriesValue FromDateTime="2018-01-01T00:00:00" UntilDateTime="2019-01-01T00:00:00" UtcFromDateTime="2018-01-01T05:00:00Z" UtcUntilDateTime="2019-01-01T05:00:00Z"  />
		</ExpectedTimeSeriesValues>
	</ExpectedTimeSeries>
	</ExpectedTimeSeriesSet>
	</ExpectedTimeSeriesSets>
</ExpectedResult>			
</DealInsertUpdateTestCase>